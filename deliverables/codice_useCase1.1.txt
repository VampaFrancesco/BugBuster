@startuml
left to right direction

package "Utenti e ruoli" {
    actor Paziente
    actor "Personale Tecnico" as Tecnico
    actor Medico
    actor Infermiere

    usecase "Prenota visite/esami" as Prenota
    usecase "Visualizza storico prenotazioni" as Storico
    usecase "Riceve notifiche promemoria" as Notifiche
    usecase "Consulta sintomi malattie" as Sintomi
    usecase "Modifica profilo" as ModificaProfilo
    usecase "Gestisce disponibilitÃ  e appuntamenti" as Disponibilita
    usecase "Approva/rifiuta prenotazioni" as Approva
    usecase "Consulta agenda prenotazioni" as Agenda
    usecase "Consulta cartelle cliniche pazienti" as CartelleCliniche
    usecase "Visualizza prenotazioni pazienti assegnati" as VisualizzaPrenotazioni
    usecase "Aggiorna stato esame/visita" as AggiornaStato
}

package "Sistemi Esterni" {
    component "Servizio di Notifica (e-mail/SMS)" as NotificaService
    component "Sistema di Autenticazione (es. login via e-mail, Google)" as Autenticazione
    component "API malattie/sintomi" as ApiMalattie
    database "Database esterno malattie/sintomi" as DatabaseEsternoMalattie
}

package "Sistemi Interni" {
    component "Modulo prenotazioni" as PrenotazioniModulo
    component "Modulo gestione utenti" as UtentiModulo
    component "Modulo notifiche" as NotificheModulo
    component "Modulo cartelle cliniche" as CartelleClinicheModulo
    database "Database interno" as Database
    database "Database cartelle cliniche" as DatabaseCartelleCliniche
}

' Interazioni degli attori con il sistema
Paziente -- Prenota
Paziente -- Storico
Paziente -- Notifiche
Paziente -- Sintomi
Paziente -- ModificaProfilo
Tecnico -- Disponibilita
Tecnico -- Approva
Medico -- Agenda
Medico -- CartelleCliniche
Infermiere -- VisualizzaPrenotazioni
Infermiere -- AggiornaStato

' Interazioni tra i componenti interni
PrenotazioniModulo -- Database : gestisce appuntamenti
PrenotazioniModulo -- NotificheModulo : invia promemoria
UtentiModulo -- Autenticazione : verifica credenziali
UtentiModulo -- Database : gestisce profili e ruoli
NotificheModulo -- Database : recupera prenotazioni
NotificheModulo -- NotificaService : invia notifiche
CartelleClinicheModulo -- DatabaseCartelleCliniche : gestisce cartelle cliniche
Database -- PrenotazioniModulo : fornisce dati prenotazioni
Database -- UtentiModulo : fornisce dati utenti
Database -- NotificheModulo : fornisce dati notifiche
ApiMalattie -- DatabaseEsternoMalattie : interroga

' Permessi di accesso
Paziente --> PrenotazioniModulo : accesso
Paziente --> ApiMalattie : lettura
Paziente --> Autenticazione : accesso
Paziente --> UtentiModulo : accesso (modifica profilo)
Tecnico --> PrenotazioniModulo : accesso
Tecnico --> Autenticazione : accesso
Tecnico --> Database : accesso
Medico --> Autenticazione : accesso
Medico --> ApiMalattie : lettura
Medico --> Database : accesso
Medico --> CartelleClinicheModulo : accesso
PrenotazioniModulo --> Database : accesso
UtentiModulo --> Database : accesso
UtentiModulo --> Autenticazione : accesso
NotificheModulo --> Database : accesso
NotificheModulo --> NotificaService : accesso
CartelleClinicheModulo --> DatabaseCartelleCliniche : accesso
ApiMalattie --> DatabaseEsternoMalattie : accesso

' Interazioni con sistemi esterni
NotificaService -- NotificheModulo : riceve richieste
Autenticazione -- UtentiModulo : verifica credenziali

@enduml
